<%- include('./partials/header') %>


<% if(success && success.length>0){ %>
    <div class="fixed top-24 left-1/2 transform -translate-x-1/2 z-40 animate-slide-down">
        <div class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl shadow-lg backdrop-blur-sm border border-green-400/20">
            <div class="flex items-center space-x-2">
                <i class="ri-check-line text-xl"></i>
                <span class="font-medium"><%= success %></span>
            </div>
        </div>
    </div>
<% } %>

<!-- Main Container -->
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30 pt-24">
    <div class="max-w-7xl mx-auto px-6 py-8">
        <div class="flex gap-8">
            
            <!-- Sidebar -->
            <div class="w-80 flex-shrink-0">
                <div class="sticky top-28 space-y-8">
                    
                    <!-- Sort Section -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100/50 backdrop-blur-sm">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                                <i class="ri-sort-desc text-white text-sm"></i>
                            </div>
                            <h3 class="text-lg font-bold text-gray-800">Sort Products</h3>
                        </div>
                        <form action="/shop" class="w-full">
                            <select class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 hover:bg-white text-gray-700 font-medium" name="sortby">
                                <option value="popular">ðŸ”¥ Most Popular</option>
                                <option value="newest">âœ¨ Latest Arrivals</option>
                            </select>
                        </form>
                    </div>
                    
                    <!-- Categories Section -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100/50 backdrop-blur-sm">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center">
                                <i class="ri-grid-line text-white text-sm"></i>
                            </div>
                            <h3 class="text-lg font-bold text-gray-800">Categories</h3>
                        </div>
                        <div class="space-y-3">
                            <a class="group flex items-center gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-300 text-gray-700 hover:text-blue-600" href="">
                                <i class="ri-star-line text-lg"></i>
                                <span class="font-medium">New Collection</span>
                                <i class="ri-arrow-right-s-line ml-auto opacity-0 group-hover:opacity-100 transition-all duration-300"></i>
                            </a>
                            <a class="group flex items-center gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-300 text-gray-700 hover:text-blue-600" href="">
                                <i class="ri-shopping-bag-line text-lg"></i>
                                <span class="font-medium">All Products</span>
                                <i class="ri-arrow-right-s-line ml-auto opacity-0 group-hover:opacity-100 transition-all duration-300"></i>
                            </a>
                            <a class="group flex items-center gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 transition-all duration-300 text-gray-700 hover:text-blue-600" href="">
                                <i class="ri-price-tag-3-line text-lg"></i>
                                <span class="font-medium">Discounted Products</span>
                                <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">Sale</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Filters Section -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100/50 backdrop-blur-sm">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-8 h-8 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center">
                                <i class="ri-filter-3-line text-white text-sm"></i>
                            </div>
                            <h3 class="text-lg font-bold text-gray-800">Filters</h3>
                        </div>
                        <div class="space-y-3">
                            <a class="group flex items-center gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-green-50 hover:to-teal-50 transition-all duration-300 text-gray-700 hover:text-green-600" href="">
                                <i class="ri-checkbox-line text-lg"></i>
                                <span class="font-medium">Availability</span>
                            </a>
                            <a class="group flex items-center gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-green-50 hover:to-teal-50 transition-all duration-300 text-gray-700 hover:text-green-600" href="">
                                <i class="ri-percent-line text-lg"></i>
                                <span class="font-medium">Discount</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div class="flex-1">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-4xl font-black bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2">
                        Premium Collection
                    </h1>
                    <p class="text-gray-600 text-lg">Discover our curated selection of luxury bags</p>
                </div>
                
                <!-- Products Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <% products.forEach(function(product, index){ %>
                        <div class="group product-card bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 border border-gray-100/50 hover:border-gray-200 transform hover:-translate-y-2" style="animation-delay: <%= index * 100 %>ms">
                            
                            <!-- Product Image -->
                            <div class="relative overflow-hidden rounded-t-2xl" style="background-color: <%= product.bgcolor %>">
                                <div class="aspect-square flex items-center justify-center p-8 bg-gradient-to-br from-transparent to-black/5">
                                    <img class="w-full h-full object-contain transform group-hover:scale-110 transition-transform duration-700" 
                                         src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                                         alt="<%= product.name %>">
                                </div>
                                
                                <!-- Overlay on hover -->
                                <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-t-2xl"></div>
                                
                                <!-- Quick view button -->
                                <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0">
                                    <button class="w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg">
                                        <i class="ri-eye-line text-gray-700"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Product Info -->
                            <div class="p-6" style="background-color: <%= product.panelcolor %>;">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="flex-1">
                                        <h3 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors duration-300" style="color: <%= product.textcolor %>;">
                                            <%= product.name %>
                                        </h3>
                                        <div class="flex items-center gap-2 mb-3">
                                            <span class="text-2xl font-black" style="color: <%= product.textcolor %>;">
                                                â‚¹<%= product.price %>
                                            </span>
                                            <div class="flex text-yellow-400">
                                                <i class="ri-star-fill text-sm"></i>
                                                <i class="ri-star-fill text-sm"></i>
                                                <i class="ri-star-fill text-sm"></i>
                                                <i class="ri-star-fill text-sm"></i>
                                                <i class="ri-star-half-fill text-sm"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Add to Cart Button -->
                                <a href="/addtocart/<%= product._id %>" 
                                   class="group/btn w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-6 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-lg transform hover:scale-105 active:scale-95">
                                    <i class="ri-shopping-cart-line text-lg transition-transform group-hover/btn:scale-110"></i>
                                    <span>Add to Cart</span>
                                </a>
                            </div>
                        </div>
                    <% }) %>
                </div>
                
                <!-- Empty State (if no products) -->
                <% if(products.length === 0) { %>
                    <div class="text-center py-20">
                        <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="ri-shopping-bag-line text-4xl text-gray-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-600 mb-2">No Products Found</h3>
                        <p class="text-gray-500">Try adjusting your filters or check back later.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>

<style>
@keyframes slide-down {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

.animate-slide-down {
    animation: slide-down 0.5s ease-out;
}

.product-card {
    animation: fadeInUp 0.6s ease-out both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Custom scrollbar for sidebar */
.sidebar::-webkit-scrollbar {
    width: 4px;
}

.sidebar::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
    border-radius: 2px;
}
</style>

<%- include('./partials/footer') %>